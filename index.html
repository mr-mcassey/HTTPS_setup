<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide: Securing a Local URL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5DC; /* Earthy Tech: Light Beige */
            color: #36454F; /* Earthy Tech: Charcoal */
        }
        .accent-bg { background-color: #A0522D; } /* Earthy Tech: Muted Terracotta */
        .accent-text { color: #A0522D; }
        .accent-border { border-color: #A0522D; }
        .step-item.completed {
            text-decoration: line-through;
            opacity: 0.7;
        }
        .step-item.completed .step-number {
            background-color: #6B8E23; /* Earthy Tech: Olive */
            color: white;
        }
        .step-number {
            transition: background-color 0.3s ease;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: rgba(255, 255, 255, 0.1);
            color: #E2E8F0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        code {
            font-family: 'Courier New', Courier, monospace;
            background-color: rgba(0,0,0,0.05);
            padding: 2px 4px;
            border-radius: 4px;
        }
        pre code {
            padding: 0;
            background-color: transparent;
        }
        pre {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem 1rem 1rem 1rem;
        }
    </style>
</head>
<body class="antialiased">
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-10 shadow-sm">
        <nav class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl font-bold accent-text">Secure Local URL Guide</h1>
                <div class="hidden sm:flex sm:space-x-8">
                    <a href="#part1" class="font-medium text-gray-600 hover:accent-text transition-colors">1. Certificates</a>
                    <a href="#part2" class="font-medium text-gray-600 hover:accent-text transition-colors">2. Nginx</a>
                    <a href="#part3" class="font-medium text-gray-600 hover:accent-text transition-colors">3. Windows</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
        <div class="bg-white rounded-lg shadow-lg p-6 sm:p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4">Introduction</h2>
            <p class="mb-4">This guide will walk you through securing a local application accessible via a <code>.lan</code> URL. We'll generate self-signed SSL certificates with XCA, configure Nginx to serve your application over HTTPS, and finally, make your Windows machine trust these certificates to avoid browser warnings.</p>
            
            <h3 class="text-lg font-semibold mb-4">Overall Process</h3>
            <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <div class="text-center">
                    <div class="bg-gray-200 rounded-lg p-4">
                        <span class="text-2xl">üìú</span>
                        <p class="font-semibold mt-2">1. Create Certs (XCA)</p>
                    </div>
                </div>
                <div class="text-gray-400 text-2xl font-bold">&rarr;</div>
                <div class="text-center">
                    <div class="bg-gray-200 rounded-lg p-4">
                        <span class="text-2xl">‚öôÔ∏è</span>
                        <p class="font-semibold mt-2">2. Configure Nginx</p>
                    </div>
                </div>
                <div class="text-gray-400 text-2xl font-bold">&rarr;</div>
                <div class="text-center">
                    <div class="bg-gray-200 rounded-lg p-4">
                        <span class="text-2xl">üíª</span>
                        <p class="font-semibold mt-2">3. Trust Certs (Windows)</p>
                    </div>
                </div>
            </div>
        </div>

        <section id="part1" class="mb-12">
            <h2 class="text-3xl font-bold mb-6 accent-text border-b-2 accent-border pb-2">Part 1: Creating Certificates with XCA</h2>
            <p class="mb-6 text-gray-700">In this section, you'll use XCA on your Ubuntu machine to generate a custom Certificate Authority (CA) and then use it to sign a server certificate for your local website. This establishes a root of trust for your local environment.</p>
            <ol class="space-y-6">
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">1</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Install XCA</h3>
                        <p class="text-sm text-gray-600 mb-2">(this installs the software we'll use to create your security certificates)</p>
                        <div class="relative rounded-lg overflow-hidden mt-2">
                            <pre><code class="language-bash">sudo apt update
sudo apt install xca</code></pre>
                            <button class="copy-btn">Copy</button>
                        </div>
                    </div>
                </li>
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">2</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Open XCA</h3>
                        <p class="text-sm text-gray-600 mb-2">(this starts the certificate management application)</p>
                        <p>Launch XCA from your applications menu or by typing <code>xca</code> in the terminal.</p>
                    </div>
                </li>
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">3</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Create a New Database</h3>
                        <p class="text-sm text-gray-600 mb-2">(this creates a secure file to store your certificates and keys)</p>
                        <p>Go to <strong>File -> New Database...</strong>. Choose a location and set a strong password.</p>
                    </div>
                </li>
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">4</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Create a Certificate Authority (CA)</h3>
                        <p class="text-sm text-gray-600 mb-2">(this creates the root certificate that will vouch for your server's certificate)</p>
                        <p>In XCA, click "New Certificate". Use the "\[default] CA" template. Set the Common Name to something like <code>My Local Network CA</code>. On the Extensions tab, ensure "CA" is checked. Generate a new 2048-bit RSA key pair for it.</p>
                    </div>
                </li>
                 <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">5</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Create a Server Certificate</h3>
                        <p class="text-sm text-gray-600 mb-2">(this creates the certificate for your specific `.lan` website)</p>
                        <p>Click "New Certificate" again. Use the "\[default] HTTPS_server" template and sign it with your new CA. The "Common Name" **must** be your URL (e.g., <code>myapp.lan</code>). Add your URL and IP address to the "Subject Alternative Name" (SAN) list. Generate another 2048-bit RSA key pair.</p>
                    </div>
                </li>
                 <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">6</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Export Server Certificate & Key</h3>
                        <p class="text-sm text-gray-600 mb-2">(this saves the necessary files for Nginx to use HTTPS)</p>
                        <p>Select your server certificate and export it as <code>server_public.crt</code>. Then select its private key and export it as <code>server_private.key</code>.</p>
                    </div>
                </li>
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">7</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Export the CA Certificate</h3>
                        <p class="text-sm text-gray-600 mb-2">(this saves the file you'll import into Windows to trust your certificates)</p>
                        <p>Select your CA certificate and export it as <code>ca_public.crt</code>.</p>
                    </div>
                </li>
            </ol>
        </section>

        <section id="part2" class="mb-12">
            <h2 class="text-3xl font-bold mb-6 accent-text border-b-2 accent-border pb-2">Part 2: Configuring Nginx for HTTPS</h2>
            <p class="mb-6 text-gray-700">Next, you will configure Nginx. This involves installing the web server, placing your newly created certificate files where Nginx can access them, and setting up a server block to handle encrypted traffic for your local site.</p>
            <ol class="space-y-6">
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">1</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Install Nginx</h3>
                        <p class="text-sm text-gray-600 mb-2">(this installs the web server software)</p>
                        <div class="relative rounded-lg overflow-hidden mt-2">
                            <pre><code class="language-bash">sudo apt install nginx</code></pre>
                            <button class="copy-btn">Copy</button>
                        </div>
                    </div>
                </li>
                 <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">2</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Create SSL Directory & Move Files</h3>
                        <p class="text-sm text-gray-600 mb-2">(this puts the certificate files where Nginx can find them)</p>
                         <div class="relative rounded-lg overflow-hidden mt-2">
                            <pre><code class="language-bash">sudo mkdir -p /etc/nginx/ssl
sudo mv /path/to/server_public.crt /etc/nginx/ssl/
sudo mv /path/to/server_private.key /etc/nginx/ssl/</code></pre>
                            <button class="copy-btn">Copy</button>
                        </div>
                        <p class="mt-2 text-sm">Replace <code>/path/to/</code> with the actual location of your exported files.</p>
                    </div>
                </li>
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">3</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Create Nginx Server Block</h3>
                        <p class="text-sm text-gray-600 mb-2">(this configures how Nginx handles requests to your website)</p>
                        <p>Create a new configuration file at <code>/etc/nginx/sites-available/myapp.lan</code> and paste in the server block configuration provided in the source document, replacing placeholders for your app's IP and port.</p>
                    </div>
                </li>
                <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">4</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Enable Server Block</h3>
                        <p class="text-sm text-gray-600 mb-2">(this tells Nginx to use your new website configuration)</p>
                         <div class="relative rounded-lg overflow-hidden mt-2">
                            <pre><code class="language-bash">sudo ln -s /etc/nginx/sites-available/myapp.lan /etc/nginx/sites-enabled/</code></pre>
                            <button class="copy-btn">Copy</button>
                        </div>
                    </div>
                </li>
                 <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">5</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Test and Restart Nginx</h3>
                        <p class="text-sm text-gray-600 mb-2">(this applies your new Nginx configuration)</p>
                         <div class="relative rounded-lg overflow-hidden mt-2">
                            <pre><code class="language-bash">sudo nginx -t
sudo systemctl restart nginx</code></pre>
                            <button class="copy-btn">Copy</button>
                        </div>
                    </div>
                </li>
            </ol>
        </section>

        <section id="part3">
            <h2 class="text-3xl font-bold mb-6 accent-text border-b-2 accent-border pb-2">Part 3: Trusting the CA on Windows</h2>
            <p class="mb-6 text-gray-700">The final step is to make your Windows machine trust your custom CA. This will eliminate the "Your connection is not private" errors in your browser when accessing your local site, as Windows will now recognize your CA as a valid authority.</p>
            <ol class="space-y-6">
                 <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">1</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Transfer the CA Certificate</h3>
                        <p class="text-sm text-gray-600 mb-2">(move the `ca_public.crt` file to your Windows machine)</p>
                        <p>Use a USB drive, network share, or any other method to copy the <code>ca_public.crt</code> file to your Windows desktop or downloads folder.</p>
                    </div>
                </li>
                 <li class="step-item flex items-start cursor-pointer">
                    <div class="step-number flex-shrink-0 w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center font-bold mr-4">2</div>
                    <div class="flex-grow">
                        <h3 class="font-bold text-lg">Import the CA Certificate into Windows</h3>
                        <p class="text-sm text-gray-600 mb-2">(this installs the CA certificate so Windows recognizes your website's security)</p>
                        <p>Open the Microsoft Management Console (<code>mmc.exe</code>), add the "Certificates" snap-in for the "Computer account". Navigate to <strong>Trusted Root Certification Authorities > Certificates</strong>, right-click, and import your <code>ca_public.crt</code> file.</p>
                    </div>
                </li>
            </ol>
        </section>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const pre = e.target.previousElementSibling;
                    const code = pre.querySelector('code').innerText;
                    
                    const el = document.createElement('textarea');
                    el.value = code;
                    document.body.appendChild(el);
                    el.select();
                    try {
                        document.execCommand('copy');
                        e.target.innerText = 'Copied!';
                        setTimeout(() => {
                            e.target.innerText = 'Copy';
                        }, 2000);
                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                    }
                    document.body.removeChild(el);
                });
            });

            const stepItems = document.querySelectorAll('.step-item');
            stepItems.forEach(item => {
                item.addEventListener('click', () => {
                    item.classList.toggle('completed');
                });
            });

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>
</html>
